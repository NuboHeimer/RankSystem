Ранговая система для streamer.bot. Работает как для нативных площадок, представленных в боте (twitch, youtube, trovo), так и для площадок поддерживаемых миничатом. Для подключения миничата к стримерботу воспользуйтесь [интеграцией](https://docs.play-code.ru/minichat). Последнюю, на данный момент, версию интеграции можно найти в [streamfony](https://t.me/StreamfonyBot?start=_tgr_JpK_P4xlZmI6), раздел "плагины".

Видеогайд будет сделан в будущем.

## Реализованный функционал.
На данный момент система умеет:
- начислять внутреннюю валюту (далее -- коины) по любому триггеру бота, в котором приходит *userName*, *userId* (*minichat.Data.UserID* для миничата), *eventSource*/*commandSource*. На всех площадках.
- запоминать дату фоллова на канал. На всех площадках, для которых есть соответствующий триггер.
- запомниать категорию стрима которая была при фоллове. Только twitch.
- запоминать количество сообщений пользователя. На всех площадках, для которых есть соответствующий триггер.
- запоминать количество времени, которое пользователь смотрел стрим.
    - Twitch.
    - Trovo под вопросом, нужны живые тесты.
    - Youtube не предоставляет список зрителей. Поэтому время запоминается только в том случае, если пользователь писал в чат в определённый период времени. Настройки описаны ниже.
    - VkVideoLive работает при наличии [моей интеграции](https://github.com/NuboHeimer/VkVideoLiveService/releases) для этой площадки.
- выводить количество коинов пользователя. На всех площадках.
- выводить игру, на которой зафлловился пользователь. Только twitch.
- выводить время просмотра стрима пользователем. Только twitch, vkvideolive, trovo, youtube.
- игнорировать пользователей из чёрного списка.

## Запланированный функционал.
TBD. Пока можете посмотреть проект с одноимённым названием.

## Содержаение файла импорта и настройка.
### Очереди
- RankSystem -- блокирующая очередь для корректной работы ранговой системы. Все экшены, взаимодействующий с ранговой системой необходимо создавать в этой очереди.
### Таймеры
- VKVideoLive -- нужен для получения времени просмотра на VKVideoLive.
### Команды
- follow -- пример команды для вывода информации о фолловере. На данный момент выводит игру, на которой зафолловился пользователь.
- watchtime -- пример команды для вывода информации о времени просмотра стримов пользователем.
- Коины -- пример команды для вывода информации о количестве коинов у пользователя.
### Экшены
- **\[RankSystem] Code** -- экшен с основным кодом.
- **\[RankSystem] Add Coins** -- экшен добавлят пользователю указанное количество коинов. Для корректной работы необходимо наличие аргументов *coinsToAdd*, *userName*, *userId* или *minichat.Data.UserID*, *eventSource* или *commandSource*.
    При вызове через триггер все аргументы кроме *coinsToAdd* берутся из данных триггера.
    В целевом экшене:
    - задайте **Core -> Arguments -> Set Argument**. В **Variable Name** укажите *coinsToAdd*. В **Value** *количесто коинов*.
    - сделайте вызов **Core -> Actions -> Run Action** и выберете описываемый экшен (**\[RankSystem] Add Coins**).

Остальные экшены будут описаны позже. Следите за обновлениями.